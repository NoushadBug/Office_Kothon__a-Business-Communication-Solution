<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Office Kothon</title>
  <link rel="icon" href="https://img.icons8.com/cotton/2x/communication--v1.png" />
  <link rel="preconnect" href="https://fonts.gstatic.com" />
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Kaushan+Script&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <link rel="stylesheet" href="https://unpkg.com/microtip/microtip.css" />
  <link rel="stylesheet" href="./toaster/toastr.min.css" />
  <link rel="stylesheet" href="./clndr/mini-event-calendar.css">
  <link rel="stylesheet" href="./css/dashboard.css" />
  <script src="./js/theme.js"></script>
</head>


<script>
  // time js
  function startTime() {
    let days = [
      'Sunday',
      'Monday',
      'Tuesday',
      'Wednesday',
      'Thursday',
      'Friday',
      'Saturday',
    ];
    var today = new Date();
    var h = today.getHours();
    var m = today.getMinutes();

    m = checkTime(m);

    var formattedTime = twelveHour(h, m);

    document.getElementById('time').innerHTML = formattedTime;
    document.getElementById('date').innerHTML =
      days[today.getDay()] + ', ' + today.getDate();
    setTimeout(startTime, 500);
  }
  function checkTime(i) {
    if (i < 10) {
      i = '0' + i;
    } // add zero in front of numbers < 10
    return i;
  }
  // twelve hour formatted time
  function twelveHour(h, m) {
    var AmOrPm = h >= 12 ? 'PM' : 'AM';
    h = h % 12 || 12;
    return h + ':' + m + ' ' + AmOrPm;
  }
</script>



<body onload="startTime()">
  <div class="loader" style="
        position: fixed;
        z-index: 99;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        background: #101011;
        justify-content: center;
        align-items: center;
      ">
    <img src="https://i.giphy.com/media/fYqaFLAWq7v2oRy4vh/giphy.webp" alt="loader" width="180px" height="180px" />
  </div>

  <div class="dashboard-main row m-0 p-0" style="height: -webkit-fill-available">
    <div class="dashboard-container row col-md-9 mr-2">
      <!-- leftbar container -->
      <div class="leftbar py-5">
        <a href="./index.html" class="text-center"><img src="https://img.icons8.com/cotton/2x/communication--v1.png"
            alt="" height="51px"></a>
        <div class="leftbar-icons">
          <a href="" aria-label="Home" data-microtip-position="right" role="tooltip"><i class="fa fa-home m-0"></i></a>
          <a href="./chat.html" aria-label="Chat" data-microtip-position="right" role="tooltip"><i
              class="fa fa-comment"></i></a>
          <!-- <a href="" aria-label="Group chat" data-microtip-position="right" role="tooltip"><i
              class="fa fa-group"></i></a> -->
          <a href="./addTask.html" aria-label="Task" data-microtip-position="right" role="tooltip"><i
              class="fa fa-edit"></i></a>
          <a href="./settings.html" aria-label="Settings" data-microtip-position="right" role="tooltip"><i
              class="fa fa-cog"></i></a>
        </div>
        <a href="#0" id="signout" aria-label="Sign out" data-microtip-position="right" role="tooltip"><i
            class="fa fa-sign-out text-secondary"></i></a>
      </div>
      <!-- leftbar container ends-->
      <div class="container col-md-10 my-auto" style="
      max-height: 100%;
  ">
        <div class="row mb-2 " style="
    min-height: 5%;
">
          <div class="col-md-11">
            <div class="search">
              <input type="submit" value="" class="search-btn fa ib-m">
              <div class="search-slide ib-m" style="width: 0px;">
                <input type="text" id="myInput" placeholder="Enter your search" class="ib-m">
              </div>
            </div>
          </div>
          <div class="profile ">
            <img id="userimage" alt="profile"
              src="https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png"
              style="border-radius: 50%;">
          </div>
        </div>
        <div class="row container m-auto hello-bar shadow-lg  borderDark border ">
          <div class="row col-md-6">
            <h5 id="userName" class="col-md-12 text-left my-auto">Loading...</h5>
          </div>
          <div class=" container col-md-6">
            <img alt="" class="coffeeSVG" src="./icons/coffeNtea.svg">
          </div>
        </div>
        <div class="feed-bar scrollbar  thumbDark" id="force-overflow">
          <div class="panel-group" id="accordion">



          </div>
        </div>
      </div>
    </div>
    <div class="rightbar-div m-auto col-md-3">
      <div class="clock-section px-4 pt-4 pb-2">
        <div class="date-section text-light text-center">
          <h3 id="date"></h3>
        </div>
        <div class="time-section text-light text-center">
          <h1 id="time"></h1>
        </div>
      </div>
      <div id="calendar"></div>
      <div class=" my-3 weather ">

        <!-- <div class="notification"> </div> -->
        <div class=" row " style="height: 18%;">
          <div class="weather-icon col-md-6"><img src="./icons/unknown.png" alt="weather icon"></div>
          <div class="temp-infos my-auto  col-md-6 text-light">
            <div class="temperature-value">
              <p>- °<span>C</span></p>
            </div>
            <div class="temperature-description text-secondary text-center text-uppercase">
              <p> - </p>
            </div>
          </div>
          <div class="location text-center text-info mt-2 mx-auto">
            <p>-</p>
          </div>

        </div>
      </div>
    </div>
  </div>
  </div>
</body>

<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.1.1/firebase-analytics.js"></script>


<script>
  var firebaseConfig = {
    apiKey: "AIzaSyAcNk4KaBv11KxfLtYofUq2zBRDsszM2VE",
    authDomain: "office-kothon.firebaseapp.com",
    databaseURL: "https://office-kothon.firebaseio.com",
    projectId: "office-kothon",
    storageBucket: "office-kothon.appspot.com",
    messagingSenderId: "605346039997",
    appId: "1:605346039997:web:350fd046addb6f51860fd4",
    measurementId: "G-W822J60VT1"
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);
  firebase.analytics();

  //make firebase consts
  const auth = firebase.auth();
  firebase.auth().onAuthStateChanged(function (user) {
    if (!user) {
      window.location.replace('./index.html');
    }
    else {
      if (user.displayName.indexOf('isNewUser') !== -1) {
        auth.currentUser.updateProfile({
          displayName: user.displayName.split("isNewUser")[0],
          photoURL: "https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png"
        })
      }
      if (user.displayName == 'admin') {
        window.location.replace('./admin.html');
      }
    }
  });
  const db = firebase.firestore();

  //update firebase settings
  db.settings({ timestampsInSnapshots: true });

</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>

<script src="./toaster/toastr.min.js"></script>

<script src="./clndr/mini-event-calendar.js"></script>


<script>



  firebase.auth().onAuthStateChanged(function (user) {
    if (user) {
      if (auth.currentUser.displayName) {
        auth.currentUser.updateProfile({
          displayName: auth.currentUser.displayName.split('isNewUser')[0]
        }).then(function () {
          $('#userName').text('Hi ' + user.displayName + '!');
        })
      }
      else {
        $('#userName').text('Hi ' + user.displayName + '!');
      }
    }
    else {
      $('#userName').text('No user is signed in.');
    }
  });


  document.getElementById('signout').addEventListener('click', () => {
    firebase.auth().signOut().then(() => {
      localStorage.setItem("theme", "dark")

      toastr['info']('You are signed out! ', 'see you soon');
    });
    window.location.replace("./index.html");
  });
</script>
<script>
  $(window).on('load', function () {
    firebase.auth().onAuthStateChanged(function (user) {
      if (!user) {
        window.location.replace('./index.html');
      }
      else {
        if (user.displayName.indexOf('isNewUser') !== -1) {
          auth.currentUser.updateProfile({
            displayName: user.displayName.split("isNewUser")[0],
            photoURL: "https://cdn.pixabay.com/photo/2015/10/05/22/37/blank-profile-picture-973460_640.png"
          })
        }
        if (user.displayName == 'admin') {
          window.location.replace('./admin.html');
        }
        if (user.displayName == 'isUnknown') {
          window.location.replace('./userNotVerified.html');
        }
      }
    });
    $('#signup-form').hide('slow');
  });
</script>
<script src="./js/theme.js"></script>
<script src="./js/dashboard.js"></script>


</html>